(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1e3:function(e,t,n){"use strict";n.r(t);var r=n(20),o=(n(93),n(94),n(33),n(172),n(64),n(78),n(198),n(57),{layout:"admin",data:function(){return{visibleAdd:!1,activeButtonAdd:!0,fileUser:"",btnLoading:!1,userDuplicate:[],pagination:{pageSize:20},formAdd:{studenID:"",nameChild:"",dob:"",email:"",phone:"",class:""},rules:{studenID:{required:!0,message:"Please enter studenID!"},nameChild:{required:!0,message:"Please enter name child!"},dob:{required:!0,message:"Please enter date of birth!"},email:{required:!0,message:"Please enter username!"},phone:{required:!0,message:"Please enter phone!"},class:{required:!0,message:"Please enter class!"}}}},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.$store.getters.getUsers.length){t.next=3;break}return t.next=3,e.$store.dispatch("setUsers");case 3:case"end":return t.stop()}}),t)})))()},head:function(){return{title:"".concat(this.$t("Giáo viên")," | Admin")}},computed:{columns:function(){var e=[{title:this.$t("Mã giáo viên"),dataIndex:"userID",key:"userID",width:"150px",scopedSlots:{filterDropdown:"filter",filterIcon:"filterIcon"},onFilter:function(e,t){return t.userID.toString().toLowerCase().includes(e.toLowerCase())},sorter:function(a,b){return a.userID.toString().localeCompare(b.userID.toString())}},{title:this.$t("Họ tên"),dataIndex:"userName",key:"userName",scopedSlots:{filterDropdown:"filter",filterIcon:"filterIcon"},onFilter:function(e,t){return t.userName.toString().toLowerCase().includes(e.toLowerCase())},sorter:function(a,b){return a.userName.toString().localeCompare(b.userName.toString())}},{title:this.$t("Ngày sinh"),dataIndex:"dateOfBirth",key:"dateOfBirth"},{title:this.$t("Email"),dataIndex:"email",key:"email"},{title:this.$t("SDT"),dataIndex:"phone",key:"phone"},{title:this.$t("Lớp"),dataIndex:"formTeacher",key:"formTeacher",align:"center",sorter:function(a,b){return a.formTeacher.toString().localeCompare(b.formTeacher.toString())}},{title:this.$t("Môn"),dataIndex:"tag",key:"tag"},{title:this.$t("Trưởng khoa"),dataIndex:"dean",key:"dean",align:"center",scopedSlots:{customRender:"dean"}},{title:this.$t("Quyền"),dataIndex:"role",key:"role"},{title:this.$t("Thao tác"),key:"action",align:"center",scopedSlots:{customRender:"action"}}];return e},users:function(){return this.$store.getters.getUsers.filter((function(e){return"teacher"===e.role})).slice().reverse()}},methods:{handleOpenModalAdd:function(){this.visibleAdd=!0},handleCloseModalAdd:function(){this.visibleAdd=!1,this.userDuplicate.length=0,this.fileUser="",this.activeButtonAdd=!0},onSelectChange:function(e,t){},handleSearch:function(e,t,n){t()},handleReset:function(e){e()},dummyRequest:function(e){setTimeout((function(){e.onSuccess("ok")}),0)},handleChangeFile:function(e){"done"===e.file.status&&("application/vnd.ms-excel"===e.file.originFileObj.type?(this.fileUser=e.file.originFileObj,this.activeButtonAdd=!1):this.$notification.open({message:this.$t("Sai định dạng"),description:this.$t("File không đúng định dạng vui lòng kiểm tra lại")}))},handleAddFileUser:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.btnLoading=!0,(n=new FormData).append("file",e.fileUser),t.next=6,e.$axios.$post("/admin/addTeachers",n);case 6:t.sent&&(e.btnLoading=!1,e.handleCloseModalAdd(),e.$store.dispatch("setUsers"),e.$notification.success({message:e.$t("Thêm thành công!")})),t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),e.$notification.error({message:e.$t("Thêm thất bại!"),description:e.$t("Một hoặc một vài mã tài khoản đã tồn tại, Vui lòng kiểm tra lại")}),e.userDuplicate=t.t0.response.data.userError,e.btnLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},handleAddUser:function(){var e=this;this.$refs.ruleFormAdd.validate((function(t){t&&e.$notification.open({message:e.$t("Chức năng đang phát triển")})}))}}}),l=n(27),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$fetchState.pending?n("LoadingView"):n("div",{staticClass:"admin-content"},[n("div",{staticClass:"options"},[n("div",{staticClass:"left"},[n("a-breadcrumb",[n("a-breadcrumb-item",[n("nuxt-link",{attrs:{to:"/admin/dashboard"}},[e._v(e._s(e.$t("Trang chủ")))])],1),e._v(" "),n("a-breadcrumb-item",[e._v(e._s(e.$t("Giáo viên")))])],1)],1),e._v(" "),n("div",{staticClass:"right"},[n("a-button",{attrs:{type:"primary"},on:{click:e.handleOpenModalAdd}},[n("a-icon",{attrs:{type:"plus"}}),e._v(" "+e._s(e.$t("Thêm giáo viên"))+" ")],1),e._v(" "),n("a-modal",{staticClass:"modal-admin",attrs:{footer:!1,title:e.$t("Thêm giáo viên")},on:{cancel:e.handleCloseModalAdd},model:{value:e.visibleAdd,callback:function(t){e.visibleAdd=t},expression:"visibleAdd"}},[n("template",{slot:"closeIcon"},[n("i",{staticClass:"fal fa-times icon"})]),e._v(" "),n("a-tabs",{attrs:{"default-active-key":"1"}},[n("a-tab-pane",{key:"1",attrs:{tab:e.$t("Thêm 1 giáo viên")}}),e._v(" "),n("a-tab-pane",{key:"2",attrs:{tab:e.$t("Thêm bằng file exel"),"force-render":""}},[n("div",[n("a-upload-dragger",{attrs:{"show-upload-list":!1,"custom-request":e.dummyRequest,accept:".csv",name:"file",multiple:!1},on:{change:e.handleChangeFile}},[n("p",{staticClass:"ant-upload-drag-icon"},[n("a-icon",{attrs:{type:"upload"}})],1),e._v(" "),n("p",{staticClass:"ant-upload-text"},[e._v(e._s(e.$t("Bấm để chọn file hoặc kéo thả file vào")))])]),e._v(" "),e.fileUser?n("div",{staticClass:"review-file",staticStyle:{"margin-top":"16px"}},[e._v("\n                "+e._s(e.fileUser.name)+"\n              ")]):e._e(),e._v(" "),e.userDuplicate.length>0?n("div",{staticClass:"user-duplicate"},[n("p",[e._v(e._s(e.$t("Danh sách các mã tài khoản đã tồn tại")))]),e._v(" "),n("div",{staticClass:"list"},e._l(e.userDuplicate,(function(t,r){return n("span",{key:r},[e._v(e._s(t))])})),0)]):e._e(),e._v(" "),n("a-button",{staticStyle:{"margin-top":"16px"},attrs:{type:"primary",disabled:e.activeButtonAdd,block:"",loading:e.btnLoading},on:{click:e.handleAddFileUser}},[e._v("\n                "+e._s(e.$t("Thêm"))+"\n              ")])],1)])],1)],2)],1)]),e._v(" "),n("a-table",{attrs:{bordered:"","row-selection":{onChange:e.onSelectChange},scroll:{x:1300},columns:e.columns,"data-source":e.users,pagination:e.pagination},scopedSlots:e._u([{key:"dean",fn:function(text){return["TRUE"===text?n("span",[n("a-icon",{staticStyle:{color:"green"},attrs:{type:"check"}})],1):e._e()]}},{key:"filter",fn:function(t){var r=t.setSelectedKeys,o=t.selectedKeys,l=t.confirm,c=t.clearFilters,d=t.column;return n("div",{staticClass:"contain-filter"},[n("a-input",{staticClass:"input-search",attrs:{placeholder:"Search name",value:o[0]},on:{pressEnter:function(){return e.handleSearch(o,l,d.dataIndex)},change:function(e){return r(e.target.value?[e.target.value]:[])}}}),e._v(" "),n("a-button",{attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return e.handleSearch(o,l,d.dataIndex)}}},[e._v("\n        "+e._s(e.$t("Tìm"))+"\n      ")]),e._v(" "),n("a-button",{attrs:{size:"small"},on:{click:function(t){return e.handleReset(c)}}},[e._v(" "+e._s(e.$t("Hủy"))+" ")])],1)}},{key:"filterIcon",fn:function(e){return n("a-icon",{style:{color:e?"#EA4C89":void 0},attrs:{type:"search"}})}}])},[e._v(" "),n("template",{slot:"action"},[n("span",{staticClass:"action"},[n("a-tooltip",{attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[e._v(" "+e._s(e.$t("Sửa")))])]),e._v(" "),n("a-icon",{attrs:{type:"edit"}})],2)],1),e._v(" "),n("span",{staticClass:"action"},[n("a-tooltip",{attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[e._v(" "+e._s(e.$t("Xóa")))])]),e._v(" "),n("a-icon",{attrs:{type:"delete"}})],2)],1)])],2)],1)}),[],!1,null,null,null);t.default=component.exports}}]);